{% extends 'chat/base.html' %}
<!---->
{%block title%} Chat {%endblock%}
<!---->
{%block content%} What chat room would you like to join?<br />
<input
  id="room-name-input"
  type="text"
  size="100"
  placeholder="Room Name"
/><br />
<input id="room-name-submit" class="mt-3" type="button" value="Join" />
{%for contact in contacts%} {%for friend in contact.friends.all%}
<div class="card board-color-dark">
  <div class="card-body">
    <h5 class="card-title">{{friend}}</h5>
    <a href="{%url 'chat:room' friend%}" class="btn btn-primary"
      >Start Conversation</a
    >
  </div>
</div>
{%endfor%} {%endfor%}
<script>
  document.querySelector("#room-name-input").focus();
  document.querySelector("#room-name-input").onkeyup = function (e) {
    if (e.keyCode === 13) {
      // enter, return
      document.querySelector("#room-name-submit").click();
    }
  };

  document.querySelector("#room-name-submit").onclick = function (e) {
    var roomName = document.querySelector("#room-name-input").value;
    window.location.pathname = "/api/v1/" + roomName + "/";
  };
</script>
{%endblock%}
